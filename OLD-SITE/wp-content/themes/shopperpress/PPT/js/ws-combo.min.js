/*! ws:combo JavaScript Control v1.0.2, Copyright 2011,2012 Ondrej Urik */
var Ws={};(function(i){var B=(i("base").attr("href")||""+location).split("?")[0].split("#")[0].replace(/\/[^\/]*$/,"/"),C=function(a){a=(""+i('script[src*="ws-combo"]:last').attr("src")).split("?")[0].split("#")[0].replace(/\/[^\/]*$/,"/");/^[a-z]+:\/\//i.test(a)||(a=(B+a).replace(/([^:])\/{2,}/g,"$1/"));return a}(),D="https:"==document.location.protocol,t=function(a){if(!t.cache)t.cache={};t.cache[a]||(t.cache[a]=i("<img />").attr("src",a))},q=function(a,c){c=c?(""+c).replace(/[\.\*\+\?\|\(\)\{\}\[\]\\]/g,"\\$&"):"\\s\\xA0";return(""+a).replace(RegExp("^["+c+"]+|["+c+"]+$","g"),"")},o=function(a,c){a=(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");c&&(a=a.replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/,"&#096;"));return a},v=function(){if(!v.v){var a=i('<div style="position:absolute;left:-9999px;top:-9999px;width:200px;height:150px;overflow:scroll;visibility:hidden"><p style="padding:0;margin:0;display:block;height:200px">&nbsp;</p></div>');i("body").prepend(a);v.v=200-a.get(0).childNodes[0].offsetWidth;a.remove()}return v.v},w=function(a){var c={border:[],padding:[]},d=["Top","Right","Bottom","Left"],e,f=function(a){a=parseInt(a);return isNaN(a)?0:a};for(e=0;e<d.length;e++)c.border[e]=f(a.css("border"+d[e]+"Width")),c.padding[e]=f(a.css("padding"+d[e]));c.width=a.innerWidth();return c},x=function(a,c){var d=a.get(0),e,f,g;if(!d)return null;c||(c=null);if("undefined"!=typeof d.selectionStart){if(c){d.selectionStart=c.start;d.selectionEnd=c.end||c.start;return}c={start:d.selectionStart,end:d.selectionEnd}}else if(d.createTextRange&&document.selection&&document.selection.createRange){f=d.value.length;g=d.value.replace(/(\r\n|\n\r|\r)/g,"\n");e=d.createTextRange();if(c){e.collapse(!0);c.start==c.end?e.move("character",c.end):(e.moveStart("character",c.start),e.moveEnd("character",c.end));e.select();return}c=document.selection.createRange();e.moveToBookmark(c.getBookmark());d=d.createTextRange();d.collapse(!1);c={};-1<e.compareEndPoints("StartToEnd",d)?c.start=c.end=f:(c.start=-e.moveStart("character",-f),c.start+=g.slice(0,c.start).split("\n").length-1,-1<e.compareEndPoints("EndToEnd",d)?c.end=f:(c.end=-e.moveEnd("character",-f),c.end+=g.slice(0,c.end).split("\n").length-1))}return c},p;try{document.createEvent("TouchEvent"),p=!0}catch(E){p=!1}for(var y=1,r=["DOMMouseScroll","mousewheel"],z=function(a){var c=a||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0,a=i.event.fix(c);a.type="mousewheel";c.wheelDelta&&(e=c.wheelDelta/120);c.detail&&(e=-c.detail/3);g=e;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e);void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120);d.unshift(a,e,f,g);return(i.event.dispatch||i.event.handle).apply(this,d)},A=r.length;i.event.fixHooks&&A;)i.event.fixHooks[r[--A]]=i.event.mouseHooks;i.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=r.length;a;)this.addEventListener(r[--a],z,!1);else this.onmousewheel=z},teardown:function(){if(this.removeEventListener)for(var a=r.length;a;)this.removeEventListener(r[--a],z,!1);else this.onmousewheel=null}};if(!i('link[href*="ws-combo.css"]').length){var u='<link rel="stylesheet" type="text/css" href="'+o(C,1)+'ws-combo.css" />';i.isReady?i("head").append(u):document.write(u)}i.wscombo=function(a){return new Ws.Combo(a)};i.fn.wscombo=function(a){a||(a={});delete a.parent;var c=[];this.each(function(d,e,f,g,j,l){g=i.extend({},a);if("SELECT"==e.tagName){g.items=[];g.id=e.id;g.select=e;g.name=e.name;if(!("selectedIndex"in g))g.selectedIndex=e.selectedIndex;f=e.options.length;for(d=-1;++d<f;){j=e.options[d].parentNode;if("OPTGROUP"==j.tagName&&j.label!==l)l=j.label,-1<g.selectedIndex&&g.selectedIndex++,g.items.push({l:l});if("-"==e.options[d].text&&e.options[d].disabled)g.items.push("-");else{j={url:i(e.options[d]).css("backgroundImage"),x:(""+(i(e.options[d]).css("backgroundPosition")||e.options[d].style.backgroundPosition)).split(" ")};if(!j.url||"none"==j.url)j=null;else{j.url=q(q(j.url).replace(/(^url\(|\)$)/ig,""),"\"'");if(isNaN(j.y=parseInt(j.x[1])))j.y=0;if(isNaN(j.x=parseInt(j.x[0])))j.x=0}g.items.push({t:e.options[d].text,v:e.options[d].value,d:e.options[d].disabled,i:j})}}}else g.parent=e;c.push(g)});for(;c.length;)i.wscombo(c.shift());return this};Ws.Dropdown=function(){};Ws.Dropdown.fn=Ws.Dropdown.prototype;Ws.Dropdown.fn.init=function(a){y++;a||(a={});if(!a.id)a.id="wsDropdown"+y;if("number"!=typeof a.maxHeight)a.maxHeight=200;if("string"!=typeof a.text)a.text="(select)";this.oninit(a);var c=this,d,e=i.browser.msie&&8>i.browser.version?"http"+(D?"s":"")+"://ws-cdn.appspot.com/lib/t.gif":"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",e='<div id="'+a.id+'_wscombo" class="ws-dropdown" style="visibility:hidden"><img src="'+e+'" width="16" height="16" class="dropdown-img" style="-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;user-select:none" unselectable="on" onselectstart="return false;" /><input class="dropdown-txt" id="'+o(a.id,1)+'" type="text" style="width:10px" /><img src="'+e+'" width="16" height="16" class="dropdown-btn'+(a.className?" "+a.className+"-btn":"")+'" style="-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;user-select:none" unselectable="on" onselectstart="return false;" /><input type="hidden" /></div>';if(a.select)i(a.select).replaceWith(e);else if(a.parent)i(a.parent).append(e);else{if(i.isReady)throw"ws:combo parent element not specified";document.write(e)}c.bounds=function(){var a={};a.y=c.div.offset().top;a.cy=c.div.outerHeight(0);a.scroll={y:0,cy:0};if(self.innerHeight)a.scroll.cy=self.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)a.scroll.cy=document.documentElement.clientHeight;else if(document.body)a.scroll.cy=document.body.scrollHeight;if(window.pageYOffset)a.scroll.y=window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)a.scroll.y=document.documentElement.scrollTop;else if(document.body)a.scroll.y=document.body.scrollTop;else if(window.scrollTop)a.scroll.y=window.scrollTop;return a};c.on=function(d){(a["on"+d]||function(){}).apply(c,[].slice.call(arguments,1))};c.index=y;c.input=i("#"+a.id);c.div=c.input.parent();c.hidden=c.div.children("input[type=hidden]");c.img=c.div.children(".dropdown-img");c.btn=c.div.children(".dropdown-btn");a.name&&c.hidden.attr("name",a.name);c.input.val(a.text||"");c.hidden.val(a.value||"");a.img||c.img.css({display:"none"});c.input.attr("readonly","readonly").css({cursor:"default"});c.img.attr("class","dropdown-img dropdown-img-empty");i.browser.msie&&c.div.addClass("ws-ie"+Math.floor(i.browser.version));c.settings=a;c.onsetup(a);e=c.render(a);c.div.append('<div class="ws-dropdown-popup"><table border="0" cellpadding="0" cellspacing="0" class="ws-dropdown-popup-inner"><tr><td>'+e+"</td></tr></table></div>");c.ui=c.div.children(".ws-dropdown-popup");c.__mkc=function(){c.div.removeClass("ws-dropdown-focused ws-dropdown-hover ws-dropdown-disabled");if(c.disabled)return c.div.addClass("ws-dropdown-disabled");c.expanded||(c.focused&&c.div.addClass("ws-dropdown-focused"),c.hover&&c.div.addClass("ws-dropdown-hover"))};d=c.input.get(0);c.input.focus(function(){c.focused=1;c.__mkc();d.select()&&d.select()}).blur(function(){c.focused=0;c.__mkc()}).bind("mousedown",function(a){if(2>a.button){if(c.animating)return a.preventDefault(),!1;c.focused||d.focus();d.select&&d.select();c.expanded?c.hide():c.show();a.preventDefault();c.focused&&document.all&&d.select&&d.select();return!1}}).bind("keydown keyup",function(a){c.onkey(a);if(27==a.keyCode)a.cancel=1;if("keyup"==a.type)a.processed=1;if(!a.processed){if(-1<i.inArray(a.keyCode,[33,34,35,36,37,38,39,40]))a.cancel=!0;if(40==a.keyCode&&!c.expanded)a.cancel=!0,c.show(0,1)}if(a.cancel)return a.preventDefault(),!1});c.div.mouseover(function(){c.hover=1;c.__mkc()}).mouseout(function(){c.hover=0;c.__mkc()});c.bind(a);c.div.find(".dropdown-img, .dropdown-btn").bind("mousedown",function(a){if(!(2<=a.button)){if(c.animating)return a.preventDefault(),!1;c.focused||(d.focus(),d.select&&d.select());c.expanded?c.hide():c.show();a.preventDefault&&a.preventDefault();return!1}});a.disabled&&c.disable(1);c.resize=function(){c.div.css("visibility","visible");if(!a.width||"auto"==a.width||a.autoWidth)a.autoWidth=1,c.ui.css({left:"-9000px",top:"-9000px",visibility:"hidden",display:"block",width:"1%"}),a.width=c.width(a),c.ui.css({display:"none"});if(!a.maxWidth)a.maxWidth=c.div.parent().width();if(50<a.maxWidth&&a.width>a.maxWidth)a.width=a.maxWidth;c.input.css("width",a.width+"px")};a.parent?i(a.parent).ready(c.resize):i(c.div.parent()).ready(c.resize)};Ws.Dropdown.fn.disable=function(a){arguments.length||(a=1);var c=this.input.get(0);this.disabled=a?1:0;a&&(x(this.input,{start:0,end:0}),c.blur());c.disabled=a?1:0;this.__mkc();return this};Ws.Dropdown.fn.enable=function(){this.disable(0)};Ws.Dropdown.fn.render=function(){};Ws.Dropdown.fn.width=function(){};Ws.Dropdown.fn.show=function(a,c){var d=this,e=d.settings,f,g;if(d.expanded||d.disabled)return d;Ws.Dropdown_tm&&Ws.Dropdown_tm!=d&&Ws.Dropdown_tm.hide();d.expanded=d.animating=1;Ws.Dropdown_tm=d;d.ui.css({visibility:"hidden"}).css({left:"-9000px",top:"-9000px",display:"block"});f=parseInt(d.div.css("borderLeftWidth"));isNaN(f)&&(f=0);if(!d.xw||d._iv)d._iv=0,d.xw=d.onresize(e)+2*f,d.xw=Math.max(d.div.outerWidth(),d.ui.outerWidth(),d.xw),i.browser.msie&&8>i.browser.version&&(d.xw-=2*f);0<f&&(f="-"+f);g={opacity:1,height:0};b=d.bounds();u={left:f+"px",top:d.div.height()+"px",width:d.xw+"px",display:"block",visibility:"visible",opacity:0,height:"1px"};if(!d.height)d.height=d.ui.outerHeight();g.height=b.h=d.height;e.flip=0;if(b.h+b.y+b.cy+4>b.scroll.cy+b.scroll.y&&4<b.y-b.h&&b.h+4<b.scroll.cy)e.flip=1,u.top=0,g.top=-b.h;d.ui.css({width:d.xw+"px"});f=d.ui.children("table");f.css({width:"100%"});d.onbeforeshow(e,c);e.flip||f.css("marginTop","-"+b.h+"px").animate({marginTop:0},160);if("undefined"==typeof d._zi)d._zi=d.div.css("zIndex");d.__mkc();d.div.addClass("ws-dropdown-"+(e.flip?"above":"below")).css({zIndex:8094});d.ui.css(u);d.ui.animate(g,160,function(){d.iefr?(d.ui.css("height",b.h-2+"px"),d.iefr.css("height",b.h-2+"px")):d.ui.css("height","auto");e.flip&&d.ui.css({top:"-"+d.ui.outerHeight()+"px"});d.animating=0;a&&a()});return d};Ws.Dropdown.fn.hide=function(){var a=this,c=a.settings;if(!a.expanded)return a;a.animating=1;a.ui.animate({opacity:0},120,function(){a.div.css({zIndex:a._zi}).removeClass("ws-dropdown-above ws-dropdown-below");a.ui.css("display","none");a.expanded=a.animating=0;if(Ws.Dropdown_tm==a)Ws.Dropdown_tm=null;a.__mkc();a.onhide(c)});return a};Ws.Dropdown.fn.oninit=Ws.Dropdown.fn.onsetup=Ws.Dropdown.fn.onresize=Ws.Dropdown.fn.onbeforeshow=Ws.Dropdown.fn.onhide=Ws.Dropdown.fn.onkey=Ws.Dropdown.fn.bind=function(){};i(document).bind(p?"touchend":"mouseup",function(a){if(2!=a.button&&Ws.Dropdown_tm){for(var c=Ws.Dropdown_tm.div.get(0),a=a.target;a;){if(a==c)return;a=a.parentNode}Ws.Dropdown_tm.hide()}});Ws.Dropdown.extend=function(){function a(){this.init&&this.init.apply(this,arguments)}a.prototype=a.fn=new this;a.prototype.constructor=a;a.extend=arguments.callee;return a};Ws.Combo=Ws.Dropdown.extend();Ws.Combo.fn.render=function(a){var c=a.items,d=a.className,e=c.length,f=-1,g=a.maxHeight,j,l,s=o(a.text),m=i("<div />"),k='<div class="'+d+'-items" style="height:25px"><ul id="'+o(a.id,1)+'_Items" style="-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;user-select:none" unselectable="on" onselectstart="return false;">';for(0>=e&&(k+='<li class="'+d+'-empty">&nbsp;</li>');++f<e;){l=c[f];"-"==l&&(c[f]=l={s:1});"string"==typeof l&&(c[f]=l={t:l});g=l.h||l.html;j=l.t||l.text;if(!j&&g)l.t=j=m.html(q(g.replace(/<small(.*?)\/small>/gi,"").replace(/(<\/|<)[a-z]+[^>]*>/gi,""))).text();g||(g=o(j||""));if(l.s||l.separator)k+='<li class="'+d+'-separator"'+(p?"":' onmouseover="Ws.Combo.'+a.id+".hl("+f+');"')+"><s>&nbsp;</s></li>";else if(l.l||l.label)k+='<li class="'+d+'-label"'+(p?"":' onmouseover="Ws.Combo.'+a.id+".hl("+f+');"')+"><b>"+o(l.l||l.label)+"</b></li>";else{s+="<br />"+o(j);k+='<li class="'+d+"-"+(l.d?"disabled":"out")+'"';l.d||l.disabled?p||(k+=' onmouseover="Ws.Combo.'+a.id+".hl("+f+');"'):k+=' onmouseover="Ws.Combo.'+a.id+".highlight(this,"+f+');"';if(j=l.i||l.img){"string"==typeof j&&(j={x:0,y:0,url:j});if(!j.url)j.url=a.img;if(!("x"in j))j.x=0;if(!("y"in j))j.y=0;"number"==typeof j.x&&j.x&&(j.x+="px");"number"==typeof j.y&&j.y&&(j.y+="px");l.im=j="url('"+j.url+"') no-repeat "+j.x+" "+j.y;g='<span class="wsc-i" style="background:'+j+'">&nbsp;</span>'+g}k+='><span class="wsc-h">'+g+"</span></li>"}}s=!a.width||"auto"==a.width||a.autoWidth?'<div class="ws-dropdown-tmptext"><div>'+s+"</div></div>":"";k+="</ul>"+s+"</div>";if(a.combo||a.reset)g=a.reset,e=a.combo,"string"!=typeof g&&(g="Reset"),"string"!=typeof e&&(e=(a.reset?"or e":"E")+"nter a new value:"),g&&e&&(e=" "+e),k+='<div class="'+d+'-footer"><span>',a.reset&&(k+='<a href="#reset-'+a.id+'" onclick="Ws.Combo.'+a.id+'.reset();return false;" class="'+d+'-reset">'+o(g)+"</a>"),k=a.combo?k+(o(e)+'</span><br /><input onfocus="Ws.Combo.'+a.id+'.oncombo(this);" id="'+a.id+'_cb" type="text"'+(a.maxLength?' maxlength="'+a.maxLength+'"':"")+' /><div onmouseover="Ws.Combo.'+a.id+'.oncombohover(this);"></div>'):k+"</span>",k+="</div>";return'<div class="ws-combo-itop"><s></s></div>'+k+'<div class="ws-combo-itop"><s></s></div>'};Ws.Combo.fn.oninit=function(a){if(!a.className)a.className="ws-combo";if(!a.items)a.items=[];if(Ws.Combo[a.id])throw"ws:combo id '"+a.id+"' is already used";if(!/^[a-z]+[0-9a-z_\-]*$/i.test(a.id))throw"ws:combo id '"+a.id+"' is not valid, use characters [0-9a-z_-]";Ws.Combo[a.id]=this;"string"==typeof a.img&&t(a.img)};Ws.Combo.fn.onsetup=function(a){var c=this,d,e,f=a.className;c.he=function(){if(a.combo&&c._wsc)c._wsc.value="",c._wsd.style.display="none";if(c._oldW&&c._oldW!=parseInt(c.input.get(0).style.width))c.input.css({width:c._oldW+"px"}),c._iv=1};if(isNaN(c.selectedIndex=a.selectedIndex))c.selectedIndex=-1;c.oldJ=-1;if("undefined"!=typeof a.value&&-1==c.selectedIndex)for(var g=a.items.length;g--;)if(d=a.items[g],!d.s&&!d.separator&&!d.l&&!d.label&&(e=d.v||d.value,"undefined"==typeof e&&(e=d.t||d.text),e==a.value)){c.selectedIndex=g;break}if(c.selectedIndex>=a.items.length)c.selectedIndex=a.items.length-1;c.oncombohover=function(a){var d=i(a);d.fadeTo(100,1).addClass("wsc-hover");if(!a._wsc)a._wsc=1,d.mouseout(function(){d.fadeTo(100,0.5).removeClass("wsc-hover")}).click(function(a){c.hc(a)})};c.hl=function(a){if(!c.ui_anim)c.oldJ=a};c.highlight=function(a,d,e){if(!(c.ui_anim||e&&c.oldJ==d)){a||(a=c.ui_li.get(d));if(!a._b)a._b=1,i(a).bind("mouseout",function(){a.className=f+"-out"}).bind("mouseup",function(a){2>a.button&&c.select(d)});if(c.oldLi&&c.oldLi!=a)c.oldLi.className=f+"-out";a.className=f+"-in";c.oldLi=a;c.oldJ=d;if(e){var a=c.ui_li.get(d),e=a.offsetTop,g=a.offsetHeight,k=c.ui_p.scrollTop(),n=k,o=c.ui_p.height();e<k?n=e-1:e+g>k+o&&(n=e-o+g-1);0>n&&(n=0);if(n!=k)c.ui_anim=1,c.ui_p.animate({scrollTop:n},150,function(){c.ui_anim=0})}}}};Ws.Combo.fn.set=function(a){a instanceof Array&&(a={items:a});var c=0,d=this.settings.onselect;if(!a)return this;for(var e in a)0>i.inArray(e,["id","parent","select"])&&(this.settings[e]=a[e]);if("items"in a)delete this.settings.onselect,"text"in a&&this.reset(),this.ui.remove(),h=this.render(this.settings),h='<div class="ws-dropdown-popup"><table border="0" cellpadding="0" cellspacing="0" class="ws-dropdown-popup-inner"><tr><td>'+h+"</td></tr></table></div>",this.div.append(h),this.ui=this.div.children(".ws-dropdown-popup"),this.oldJ=-1,this.settings.onselect=d,this._iv=c=1,this.expanded=this.animating=0,delete this.xw,delete this.ui_li,delete this.height;"img"in a&&this.img.css({display:a.img?"":"none"});"disabled"in a&&this.disable(a.disabled?1:0);"selectedIndex"in a&&this.select(a.selectedIndex,1);(a.width||a.autoWidth||a.maxWidth||c)&&i(document).ready(this.resize);return this};Ws.Combo.fn.insert=function(a){var c=this.settings.items.slice(0),d=[].slice.call(arguments,0);"number"==typeof a?d=d.slice(1):a=c.length;1==d.length&&d[0]instanceof Array&&(d=d[0]);d.unshift(a,0);c.splice.apply(c,d);return this.set(c)};Ws.Combo.fn.remove=function(a,c){var d=this.settings.items.slice(0);1>c&&(c=1);d.splice(a,c);return this.set(d)};Ws.Combo.fn.bind=function(){var a=this.settings.onselect;delete this.settings.onselect;-1<this.selectedIndex?this.select(this.selectedIndex):this.reset();this.settings.onselect=a};Ws.Combo.fn.width=function(){var a=this.ui.find(".ws-dropdown-tmptext"),c=a.innerWidth()+(document.all?0:2);a.remove();return c};Ws.Combo.fn.oncombo=function(a){var c=this,d,e,f,g,j,l,s,m=c.settings,k,n=a.nextSibling;a._val="";n.style.display=q(a.value)?"block":"none";if(!a._wsc){a._wsc=1;c._wsd=n;c._wsc=a;var p="function"==typeof m.validate?m.validate:function(a){return m.validate&&m.validate.test?m.validate.test(a):!0};for(g=m.items.length;g--;)f=m.items[g],f._lt=(f.t||f.text||"").toLowerCase();c.hc=function(k){k.preventDefault();if(!p(e=q(a.value))||""==e)return!1;d=e.toLowerCase();g=m.items.length;l=0;for(s={combo:e};g--;)if(f=m.items[m.items.length-g-1],!f.s&&!f.separator&&!f.l&&!f.label&&!f.d&&!f.disabled&&f._lt==d){j=f.t||f.text||"";e=f.v||f.value||j;s=f;l=f.im;a.value="";n.style.display="none";c.selectedIndex=m.items.length-g-1;break}if(0>g)j=a.value,c.selectedIndex=-1;c.input.val(c.i_v=j).attr("class","dropdown-txt");c.hidden.val(e);c.img.css({background:l||""}).attr("class","dropdown-img"+(l?"":" dropdown-img-empty"));if(c.expanded)a._wsc=2,c.hide(),d=c.input.get(0),d.focus(),d.select&&d.select(),a._wsc=1;var k=c._oldW||(c._oldW=parseInt(c.input.get(0).style.width)),r=i(i("body").prepend('<div class="ws-dropdown-tmptext" style="position:absolute;left:-9999px;top:-9999px">'+o(c.input.val())+"</div>").get(0).childNodes[0]),t=Math.min(m.maxWidth,r.innerWidth()+(document.all?0:2));r.remove();if(t>k)c.input.css({width:t+"px"}),c._iv=1;c.on("select",s)};i(a).blur(function(){if(""==q(a.value))n.style.display="none"}).keydown(function(d){if(13==d.keyCode)return 2!=a._wsc&&c.hc(d),d.preventDefault(),!1}).keyup(function(d){e=q(a.value);n.style.display=e?"block":"none";if(13==d.keyCode)return d.preventDefault(),!1;if(!d.shiftKey&&!d.ctrlKey&&!d.altKey){e=e.toLowerCase();if(""==e||a._val==e||a._val.length>e.length)a._val=e;else if(a._val=e,(k=x(i(a)))&&k.start==k.end&&k.start==a.value.length)for(g=m.items.length;g--;)if(f=m.items[m.items.length-g-1],!f.s&&!f.separator&&!f.l&&!f.label&&!f.d&&!f.disabled&&""!=f._lt&&0===f._lt.indexOf(e)){e=(f.t||f.text||"").slice(e.length);if(""!=e)a.value=q(a.value)+e,k.end=a.value.length,x(i(a),k);c.highlight(0,m.items.length-g-1,1);break}p(q(a.value))?i(n).removeClass("wsc-invalid"):i(n).addClass("wsc-invalid")}})}};Ws.Combo.fn.onresize=function(a){var c=this,d=a.className,e={overflow:"visible",overflowY:"",height:"25px",width:"1px"},f,g;if(!c.ui_li)c.ui_p=c.ui.find("div."+d+"-items"),c.ui_li=c.ui.find("div."+d+"-items li"),c.ui.bind("mousewheel",function(a){a.preventDefault();return!1}),p?c.ui_p.bind("touchstart",function(){}).bind("touchmove",function(a){a.preventDefault()}):c.ui_p.bind("mousewheel",function(a,d,e){e=c.ui_p.scrollTop()-50*d;c.ui_p.scrollTop(e);a.preventDefault();return!1});i.browser.msie&&8>i.browser.version&&c.ui.find("div."+d+"-items li."+d+"-separator").css({width:"1%"});a.combo&&i("#"+a.id+"_cb").css({width:"1px"});c.ui.children().css({width:"1%"});c.ui.find(".ws-combo-itop").css({width:"1px",paddingLeft:0});c.ui.css({width:"auto"});c.ui_p.css(e);g=c.ui_p.children("ul");f=g.css({"float":"left",width:"auto"}).width();g.css({"float":"none",width:""});0<a.maxHeight&&g.height()>a.maxHeight?(f+=v(),e={height:a.maxHeight+"px"},g=1):(e={height:""},g=0);e.width="";e.overflow="hidden";c.ui_p.css(e);g&&c.ui_p.css({overflowY:"scroll"});if(a.combo||a.reset)g=c.ui.find("."+d+"-footer"),d=w(g),f=Math.max(f,g.width()+d.padding[1]+d.padding[3]);return f};Ws.Combo.fn.onbeforeshow=function(a,c){var d=a.className,e=this.ui.find(".ws-combo-itop"),d=this.ui.find("div."+d+"-items li."+d+"-separator");e.css({paddingLeft:this.div.width()-this.btn.width()+"px"});e.get(0).style.display=a.flip?"none":"block";e.get(1).style.display=a.flip?"block":"none";if(i.browser.msie&&8>i.browser.version){var e=this.ui_p.find("ul").width(),f=w(d),f=f.padding[1]+f.padding[3];d.css({width:e-f+"px"});if(!this.iefr)this.iefr=this.ui.prepend('<iframe style="float:left;position:absolute;z-index:-1;filter:mask();border:0;margin:0;padding:0;top:0;left:0;width:1px;height:1px;overflow:hidden"></iframe>').children("iframe");this.iefr.css({width:this.ui.outerWidth()+"px",height:this.ui.outerHeight()})}a.combo&&(e=i("#"+a.id+"_cb"),d=w(e),f=w(e.parent()),e.css({width:f.width-d.padding[1]-d.padding[3]-d.border[1]-d.border[3]-f.padding[1]-f.padding[3]+"px"}));if(c&&-1==this.oldJ)for(e=0;e<a.items.length;)if(d=a.items[e],d.s||d.separator||d.l||d.label||d.d||d.disabled)e++;else return this.highlight(0,e,1)};Ws.Combo.fn.select=function(a,c){var d=this.settings,e=this.input.get(0);if(0>a)return this.reset(c);this.selectedIndex=a;a=d.items[a];d=a.t||a.text||"";this.input.val(this.i_v=d).attr("class","dropdown-txt");this.hidden.val(a.v||a.value||d);this.img.css({background:a.im||""}).attr("class","dropdown-img"+(a.im?"":" dropdown-img-empty"));this.expanded&&!c&&(this.hide(),e.focus(),e.select&&e.select());this.he();this.on("select",a);return this};Ws.Combo.fn.reset=function(a){var c=this.settings,d=this.input.get(0);this.selectedIndex=-1;this.hidden.val(c.value||"");this.input.val(c.text||"").attr("class","dropdown-txt combo-sel");this.img.css("background","").attr("class","dropdown-img dropdown-img-empty");this.expanded&&!a?(this.hide(),d.focus(),d.select&&d.select()):this.focused||(delete this.i_v,this.input.val(c.text||"").attr("class","dropdown-txt combo-sel"));this.he();this.on("select");return this};Ws.Combo.fn.onkey=function(a){if("keydown"==a.type){var c=this.settings,d=this.oldJ,e=-1;if(27==a.keyCode)this.hide(),a.processed=a.cancel=1;else if(this.expanded){if(40==a.keyCode)d++,e=1;else if(38==a.keyCode){if(-1==d)d=c.items.length;d--;e=0}else if(34==a.keyCode)d=-1==d?0:d+5,e=1;else if(33==a.keyCode)d=-1==d?c.items.length:d-5,e=0;else{if(13==a.keyCode)0<=d&&d<c.items.length&&this.select(d),a.processed=a.cancel=1;return}a.processed=a.cancel=1;for(0>d?d=0:d>=c.items.length&&(d=c.items.length-1);0<=d&&d<c.items.length;)if(a=c.items[d],a.s||a.separator||a.l||a.label||a.d||a.disabled)d+=e?1:-1;else break;0>d||d>=c.items.length||d==this.oldJ||this.highlight(0,d,1)}}}})(jQuery);